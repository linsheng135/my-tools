<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘çš„AIå·¥å…·é›† - ç²¾å‡†ç‰ˆ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #667eea;
            --secondary-color: #764ba2;
            --light-bg: #f8f9fa;
            --text-primary: #333;
            --text-secondary: #666;
            --text-light: #888;
            --border-color: #e0e0e0;
            --card-shadow: 0 3px 10px rgba(0,0,0,0.08);
            --hover-shadow: 0 5px 15px rgba(102, 126, 234, 0.12);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 12px;
            color: var(--text-primary);
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 12px 30px rgba(0,0,0,0.15);
            min-height: calc(100vh - 24px);
        }
        
        /* å¤´éƒ¨ */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .header-left h1 {
            font-size: 1.6rem;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .header-left .subtitle {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        /* å·¥å…·ç»Ÿè®¡ */
        .stats-bar {
            display: flex;
            gap: 15px;
            background: var(--light-bg);
            padding: 8px 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 70px;
        }
        
        .stat-number {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--primary-color);
        }
        
        .stat-label {
            font-size: 0.75rem;
            color: var(--text-light);
        }
        
        /* æ§åˆ¶æ  */
        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .search-box {
            flex: 1;
            max-width: 300px;
            position: relative;
        }
        
        .search-input {
            width: 100%;
            padding: 8px 15px 8px 35px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 0.85rem;
            background: var(--light-bg);
        }
        
        .search-input:focus {
            outline: none;
            border-color: var(--primary-color);
            background: white;
        }
        
        .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-light);
            font-size: 0.9rem;
        }
        
        /* åˆ†é¡µæ§åˆ¶ */
        .pagination-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .pagination-btn {
            padding: 6px 12px;
            border: 1px solid var(--border-color);
            background: white;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
            color: var(--text-secondary);
        }
        
        .pagination-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .page-info {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }
        
        /* å·¥å…·ç½‘æ ¼ - è¶…ç´§å‡‘ */
        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        /* è¶…ç´§å‡‘å¡ç‰‡ */
        .tool-card {
            background: var(--light-bg);
            border-radius: 10px;
            padding: 15px;
            transition: all 0.2s;
            border: 1px solid transparent;
            text-decoration: none;
            color: var(--text-primary);
            display: block;
            position: relative;
            min-height: 120px;
        }
        
        .tool-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--hover-shadow);
            border-color: var(--primary-color);
            background: white;
        }
        
        .tool-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            margin-bottom: 10px;
        }
        
        .tool-name {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 5px;
            line-height: 1.3;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .tool-folder {
            font-size: 0.75rem;
            color: var(--primary-color);
            background: rgba(102, 126, 234, 0.1);
            padding: 2px 6px;
            border-radius: 8px;
            display: inline-block;
            margin-bottom: 8px;
        }
        
        .tool-desc {
            font-size: 0.8rem;
            color: var(--text-secondary);
            line-height: 1.3;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        /* å­ç›®å½•æŒ‡ç¤ºå™¨ */
        .subdir-indicator {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(102, 126, 234, 0.1);
            color: var(--primary-color);
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
        }
        
        /* ç©ºçŠ¶æ€ */
        .empty-state {
            grid-column: 1 / -1;
            text-align: center;
            padding: 30px 20px;
            color: var(--text-light);
        }
        
        .empty-state i {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: var(--border-color);
        }
        
        /* åŠ è½½çŠ¶æ€ */
        .loading-state {
            grid-column: 1 / -1;
            text-align: center;
            padding: 30px;
        }
        
        .spinner {
            width: 30px;
            height: 30px;
            border: 3px solid rgba(102, 126, 234, 0.2);
            border-top: 3px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* çŠ¶æ€æŒ‡ç¤ºå™¨ */
        .status-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            background: var(--light-bg);
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 0.8rem;
        }
        
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #4CAF50;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        /* æŒ‰é’®æ ·å¼ */
        .btn {
            padding: 7px 14px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.85rem;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .btn-primary {
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }
        
        /* é¡µè„š */
        .footer {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
            color: var(--text-light);
            font-size: 0.8rem;
        }
        
        .footer-links {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 8px;
        }
        
        .footer-links a {
            color: var(--primary-color);
            text-decoration: none;
        }
        
        /* ç§»åŠ¨ç«¯ä¼˜åŒ– */
        @media (max-width: 768px) {
            body {
                padding: 8px;
            }
            
            .container {
                padding: 15px;
                border-radius: 12px;
            }
            
            .header {
                flex-direction: column;
                align-items: stretch;
            }
            
            .tools-grid {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
                gap: 12px;
            }
            
            .tool-card {
                padding: 12px;
                min-height: 110px;
            }
            
            .tool-icon {
                width: 35px;
                height: 35px;
                font-size: 1rem;
            }
            
            .tool-name {
                font-size: 0.9rem;
            }
            
            .tool-desc {
                font-size: 0.75rem;
            }
            
            .controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .search-box {
                max-width: 100%;
            }
        }
        
        @media (max-width: 480px) {
            .tools-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .stats-bar {
                justify-content: space-around;
            }
        }
        
        /* å¹³æ¿ä¼˜åŒ– */
        @media (min-width: 769px) and (max-width: 1024px) {
            .tools-grid {
                grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
                gap: 14px;
            }
        }
        
        /* å¤§å±å¹•ä¼˜åŒ– */
        @media (min-width: 1400px) {
            .tools-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }
        }
        
        /* å¸®åŠ©æç¤º */
        .help-tip {
            background: #e8f5e9;
            border-left: 4px solid #4CAF50;
            padding: 12px 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-size: 0.85rem;
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- å¤´éƒ¨ -->
        <div class="header">
            <div class="header-left">
                <h1><i class="fas fa-tools"></i> æˆ‘çš„AIå·¥å…·é›†</h1>
                <p class="subtitle">ç²¾å‡†æ‰«æï¼Œåªæ˜¾ç¤ºæ‚¨å®é™…åˆ›å»ºçš„å·¥å…·</p>
            </div>
            
            <div class="header-right">
                <div class="status-indicator">
                    <div class="status-dot"></div>
                    <span id="statusText">å‡†å¤‡æ‰«æ</span>
                </div>
                
                <button class="btn btn-primary" onclick="scanTools()" id="scanBtn">
                    <i class="fas fa-search"></i> æ‰«æå·¥å…·
                </button>
            </div>
        </div>
        
        <!-- å¸®åŠ©æç¤º -->
        <div class="help-tip" id="helpTip">
            <i class="fas fa-info-circle"></i> æç¤ºï¼šç³»ç»Ÿä¼šç²¾ç¡®æ‰«ææ‚¨å®é™…åˆ›å»ºçš„å·¥å…·æ–‡ä»¶å¤¹ï¼Œå¿½ç•¥æ¨¡æ‹Ÿæ•°æ®
        </div>
        
        <!-- å·¥å…·ç»Ÿè®¡ -->
        <div class="stats-bar">
            <div class="stat-item">
                <span class="stat-number" id="totalTools">0</span>
                <span class="stat-label">æ€»å·¥å…·æ•°</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" id="foldersCount">0</span>
                <span class="stat-label">æ–‡ä»¶å¤¹</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" id="lastUpdate">-</span>
                <span class="stat-label">ä¸Šæ¬¡æ‰«æ</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" id="pageInfo">1/1</span>
                <span class="stat-label">å½“å‰é¡µ</span>
            </div>
        </div>
        
        <!-- æ§åˆ¶æ  -->
        <div class="controls">
            <div class="search-box">
                <i class="fas fa-search search-icon"></i>
                <input type="text" class="search-input" id="searchInput" placeholder="æœç´¢å·¥å…·åç§°æˆ–æ–‡ä»¶å¤¹..." onkeyup="searchTools()">
            </div>
            
            <div class="pagination-controls">
                <button class="pagination-btn" onclick="prevPage()" id="prevBtn" disabled>
                    <i class="fas fa-chevron-left"></i>
                </button>
                <span class="page-info" id="pageInfoText">ç¬¬ 1 é¡µï¼Œå…± 1 é¡µ</span>
                <button class="pagination-btn" onclick="nextPage()" id="nextBtn" disabled>
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </div>
        
        <!-- å·¥å…·ç½‘æ ¼ -->
        <div class="tools-grid" id="toolsGrid">
            <div class="loading-state">
                <div class="spinner"></div>
                <p>æ­£åœ¨æ‰«ææ‚¨çš„å·¥å…·æ–‡ä»¶å¤¹...</p>
            </div>
        </div>
        
        <!-- ç©ºçŠ¶æ€æç¤º -->
        <div id="emptyState" class="empty-state" style="display: none;">
            <i class="fas fa-folder-open"></i>
            <h3>æœªå‘ç°ä»»ä½•å·¥å…·</h3>
            <p>è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ·»åŠ å·¥å…·ï¼š</p>
            <ol style="text-align: left; max-width: 300px; margin: 10px auto; padding-left: 20px; font-size: 0.85rem;">
                <li>åœ¨GitHubä»“åº“ä¸­åˆ›å»ºæ–°æ–‡ä»¶å¤¹</li>
                <li>åœ¨æ–‡ä»¶å¤¹ä¸­åˆ›å»º index.html æ–‡ä»¶</li>
                <li>å°†å·¥å…·ä»£ç æ”¾å…¥ index.html</li>
                <li>ç‚¹å‡»"æ‰«æå·¥å…·"æŒ‰é’®</li>
            </ol>
        </div>
        
        <!-- é¡µè„š -->
        <div class="footer">
            <div class="footer-links">
                <a href="https://github.com/linsheng135/my-tools" target="_blank">GitHubä»“åº“</a>
                <a href="javascript:void(0)" onclick="clearSearch()">æ¸…é™¤æœç´¢</a>
                <a href="javascript:void(0)" onclick="showHelp()">ä½¿ç”¨å¸®åŠ©</a>
            </div>
            <p>ğŸ“± ç´§å‡‘è®¾è®¡ï¼Œä¸€å±æ˜¾ç¤ºæ›´å¤šå·¥å…·</p>
            <p>ğŸ” ç²¾å‡†æ‰«æï¼Œåªæ˜¾ç¤ºæ‚¨å®é™…åˆ›å»ºçš„å·¥å…·</p>
            <p>Â© 2024 æˆ‘çš„AIå·¥å…·é›† | ç²¾å‡†æ‰«æç‰ˆ</p>
        </div>
    </div>
    
    <script>
        // å·¥å…·æ•°æ®
        let allTools = []; // æ‰€æœ‰å·¥å…·
        let filteredTools = []; // ç­›é€‰åçš„å·¥å…·
        let currentPage = 1;
        const itemsPerPage = 12; // æ¯é¡µæ˜¾ç¤ºçš„å·¥å…·æ•°
        let lastScanTime = null;
        
        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æ‰«æ
        document.addEventListener('DOMContentLoaded', function() {
            // æ˜¾ç¤ºå¸®åŠ©æç¤º
            document.getElementById('helpTip').style.display = 'block';
            
            // å¼€å§‹æ‰«æå·¥å…·
            scanTools();
        });
        
        // æ‰«æå·¥å…·æ–‡ä»¶å¤¹ - ä½¿ç”¨å®é™…GitHub Pagesè·¯å¾„
        async function scanTools() {
            const scanBtn = document.getElementById('scanBtn');
            const statusText = document.getElementById('statusText');
            const toolsGrid = document.getElementById('toolsGrid');
            const emptyState = document.getElementById('emptyState');
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            scanBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> æ‰«æä¸­';
            scanBtn.disabled = true;
            statusText.textContent = 'æ­£åœ¨æ‰«æ...';
            
            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            toolsGrid.innerHTML = `
                <div class="loading-state">
                    <div class="spinner"></div>
                    <p>æ­£åœ¨ç²¾ç¡®æ‰«ææ‚¨çš„å·¥å…·æ–‡ä»¶å¤¹...</p>
                </div>
            `;
            
            emptyState.style.display = 'none';
            
            try {
                // ä½¿ç”¨å®é™…è·¯å¾„æ‰«æå·¥å…·
                const tools = await scanActualTools();
                
                // æ›´æ–°æ•°æ®
                allTools = tools;
                filteredTools = [...tools];
                
                // æ›´æ–°çŠ¶æ€
                statusText.textContent = 'æ‰«æå®Œæˆ';
                scanBtn.innerHTML = '<i class="fas fa-search"></i> æ‰«æå·¥å…·';
                scanBtn.disabled = false;
                
                // è®°å½•æ‰«ææ—¶é—´
                lastScanTime = new Date();
                updateLastScanTime();
                
                // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
                updateStats();
                
                // æ¸²æŸ“å·¥å…·
                renderTools();
                
            } catch (error) {
                console.error('æ‰«æå¤±è´¥:', error);
                statusText.textContent = 'æ‰«æå¤±è´¥';
                scanBtn.innerHTML = '<i class="fas fa-redo"></i> é‡è¯•';
                scanBtn.disabled = false;
                
                toolsGrid.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-exclamation-triangle"></i>
                        <h3>æ‰«æå¤±è´¥</h3>
                        <p>${error.message || 'æœªçŸ¥é”™è¯¯'}</p>
                        <p style="font-size: 0.8rem; margin-top: 10px;">æ­£åœ¨å°è¯•å¤‡ç”¨æ–¹æ¡ˆ...</p>
                    </div>
                `;
                
                // å°è¯•å¤‡ç”¨æ–¹æ¡ˆ
                setTimeout(() => {
                    scanToolsFallback();
                }, 2000);
            }
        }
        
        // æ‰«æå®é™…å·¥å…· - ç²¾ç¡®æ‰«ææ‚¨åˆ›å»ºçš„å·¥å…·
        async function scanActualTools() {
            const tools = [];
            
            // å·²çŸ¥çš„å·¥å…·æ–‡ä»¶å¤¹åˆ—è¡¨ï¼ˆæ ¹æ®æ‚¨çš„ä»“åº“å®é™…æƒ…å†µï¼‰
            const knownFolders = [
                'novel-titles',      // å°è¯´æ ‡é¢˜å·¥å…·
                'mobile-tool',       // æ‰‹æœºå·¥å…·
                'fiction-titles'     // å¯èƒ½çš„å…¶ä»–å·¥å…·
            ];
            
            // æ£€æŸ¥è¿™äº›æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨
            for (const folder of knownFolders) {
                try {
                    // å°è¯•è®¿é—®å·¥å…·çš„index.html
                    const response = await fetch(`/${folder}/index.html`, { method: 'HEAD' });
                    
                    if (response.ok) {
                        // è¿™æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„å·¥å…·æ–‡ä»¶å¤¹
                        tools.push({
                            name: formatToolName(folder),
                            folder: folder,
                            icon: getToolIcon(folder),
                            description: getToolDescription(folder),
                            hasSubdirs: await checkSubdirectories(folder)
                        });
                    }
                } catch (error) {
                    // æ–‡ä»¶å¤¹ä¸å­˜åœ¨æˆ–æ— æ³•è®¿é—®
                    console.log(`æ–‡ä»¶å¤¹ ${folder} ä¸å­˜åœ¨æˆ–æ— æ³•è®¿é—®`);
                }
            }
            
            // å¦‚æœæ²¡æœ‰æ‰¾åˆ°ä»»ä½•å·²çŸ¥å·¥å…·ï¼Œå°è¯•å‘ç°å…¶ä»–å·¥å…·
            if (tools.length === 0) {
                return await discoverOtherTools();
            }
            
            return tools;
        }
        
        // æ£€æŸ¥æ–‡ä»¶å¤¹æ˜¯å¦æœ‰å­ç›®å½•
        async function checkSubdirectories(folder) {
            try {
                // å°è¯•è·å–æ–‡ä»¶å¤¹å†…å®¹ï¼ˆé€šè¿‡GitHub APIæˆ–ç®€å•æ£€æŸ¥ï¼‰
                // è¿™é‡Œç®€åŒ–å¤„ç†ï¼Œå®é™…ä¸­å¯èƒ½éœ€è¦æ›´å¤æ‚çš„æ£€æŸ¥
                const response = await fetch(`/${folder}/`);
                
                if (response.ok) {
                    const html = await response.text();
                    // ç®€å•æ£€æŸ¥æ˜¯å¦æœ‰å­æ–‡ä»¶å¤¹é“¾æ¥
                    return html.includes('href="') && html.includes('/"') && !html.includes('index.html');
                }
            } catch (error) {
                // å¿½ç•¥é”™è¯¯
            }
            
            return false;
        }
        
        // å‘ç°å…¶ä»–å·¥å…· - å°è¯•åŠ¨æ€å‘ç°
        async function discoverOtherTools() {
            const tools = [];
            const baseUrl = window.location.origin + window.location.pathname;
            const basePath = baseUrl.substring(0, baseUrl.lastIndexOf('/')) || baseUrl;
            
            // å°è¯•è®¿é—®å¸¸è§çš„å·¥å…·æ–‡ä»¶å¤¹å
            const possibleFolders = [
                'tools', 'tool', 'apps', 'applications', 'utilities',
                'å°è¯´', 'æ ‡é¢˜', 'æ‰‹æœº', 'è®¡ç®—', 'è®°äº‹æœ¬',
                'excel', 'text', 'image', 'pdf', 'converter'
            ];
            
            for (const folder of possibleFolders) {
                try {
                    const response = await fetch(`${basePath}/${folder}/index.html`, { method: 'HEAD' });
                    
                    if (response.ok) {
                        tools.push({
                            name: formatToolName(folder),
                            folder: folder,
                            icon: getToolIcon(folder),
                            description: `ä½äº/${folder}/çš„å·¥å…·`,
                            hasSubdirs: false
                        });
                    }
                } catch (error) {
                    // å¿½ç•¥é”™è¯¯
                }
            }
            
            return tools;
        }
        
        // å¤‡ç”¨æ‰«ææ–¹æ¡ˆ
        async function scanToolsFallback() {
            const tools = [];
            
            // æœ€ç®€å•çš„æ–¹æ¡ˆï¼šåªæ˜¾ç¤ºå·²çŸ¥å­˜åœ¨çš„å·¥å…·
            // æ‚¨å¯ä»¥åœ¨è¿™é‡Œæ‰‹åŠ¨æ·»åŠ æ‚¨çš„å·¥å…·
            const manualTools = [
                {
                    name: "å°è¯´æ ‡é¢˜å·¥å…·",
                    folder: "novel-titles",
                    icon: "ğŸ“–",
                    description: "ç¼–è¾‘ã€å¤åˆ¶ã€å¯¼å‡ºå°è¯´æ ‡é¢˜åˆ°Excel",
                    hasSubdirs: false
                },
                {
                    name: "æ‰‹æœºå®ç”¨å·¥å…·",
                    folder: "mobile-tool",
                    icon: "ğŸ“±",
                    description: "è®¡ç®—å™¨ã€è®°äº‹æœ¬ç­‰å¸¸ç”¨å·¥å…·",
                    hasSubdirs: false
                }
            ];
            
            // æ£€æŸ¥è¿™äº›å·¥å…·æ˜¯å¦å®é™…å­˜åœ¨
            for (const tool of manualTools) {
                try {
                    const response = await fetch(`/${tool.folder}/index.html`, { method: 'HEAD' });
                    
                    if (response.ok) {
                        tools.push(tool);
                    }
                } catch (error) {
                    // å·¥å…·ä¸å­˜åœ¨
                }
            }
            
            // æ›´æ–°æ•°æ®
            allTools = tools;
            filteredTools = [...tools];
            
            // æ›´æ–°çŠ¶æ€
            document.getElementById('statusText').textContent = 'å¤‡ç”¨æ¨¡å¼';
            document.getElementById('scanBtn').innerHTML = '<i class="fas fa-search"></i> é‡æ–°æ‰«æ';
            document.getElementById('scanBtn').disabled = false;
            
            // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
            updateStats();
            
            // æ¸²æŸ“å·¥å…·
            renderTools();
        }
        
        // æ ¼å¼åŒ–å·¥å…·åç§°
        function formatToolName(folderName) {
            return folderName
                .replace(/-/g, ' ')
                .replace(/\b\w/g, l => l.toUpperCase())
                .replace(/novel/gi, 'å°è¯´')
                .replace(/tool/gi, 'å·¥å…·')
                .replace(/mobile/gi, 'æ‰‹æœº')
                .replace(/fiction/gi, 'å°è¯´')
                .replace(/title/gi, 'æ ‡é¢˜');
        }
        
        // è·å–å·¥å…·å›¾æ ‡
        function getToolIcon(folderName) {
            const lowerName = folderName.toLowerCase();
            
            if (lowerName.includes('novel') || lowerName.includes('fiction') || lowerName.includes('å°è¯´')) return 'ğŸ“–';
            if (lowerName.includes('mobile') || lowerName.includes('phone') || lowerName.includes('æ‰‹æœº')) return 'ğŸ“±';
            if (lowerName.includes('excel') || lowerName.includes('è¡¨æ ¼')) return 'ğŸ“Š';
            if (lowerName.includes('text') || lowerName.includes('æ–‡æœ¬')) return 'âœï¸';
            if (lowerName.includes('image') || lowerName.includes('å›¾ç‰‡')) return 'ğŸ–¼ï¸';
            if (lowerName.includes('calc') || lowerName.includes('è®¡ç®—')) return 'ğŸ§®';
            if (lowerName.includes('note') || lowerName.includes('è®°äº‹')) return 'ğŸ“';
            if (lowerName.includes('pdf')) return 'ğŸ“„';
            if (lowerName.includes('converter') || lowerName.includes('è½¬æ¢')) return 'ğŸ”„';
            
            return 'ğŸ› ï¸';
        }
        
        // è·å–å·¥å…·æè¿°
        function getToolDescription(folderName) {
            const lowerName = folderName.toLowerCase();
            
            if (lowerName.includes('novel') || lowerName.includes('fiction') || lowerName.includes('å°è¯´')) {
                return 'å°è¯´åˆ›ä½œç›¸å…³å·¥å…·';
            } else if (lowerName.includes('mobile') || lowerName.includes('phone') || lowerName.includes('æ‰‹æœº')) {
                return 'æ‰‹æœºç«¯ä¼˜åŒ–å·¥å…·';
            } else if (lowerName.includes('excel') || lowerName.includes('è¡¨æ ¼')) {
                return 'Excelæ•°æ®å¤„ç†å·¥å…·';
            } else if (lowerName.includes('text') || lowerName.includes('æ–‡æœ¬')) {
                return 'æ–‡æœ¬å¤„ç†å’Œç¼–è¾‘å·¥å…·';
            } else if (lowerName.includes('image') || lowerName.includes('å›¾ç‰‡')) {
                return 'å›¾ç‰‡ç¼–è¾‘å’Œå¤„ç†å·¥å…·';
            } else if (lowerName.includes('calc') || lowerName.includes('è®¡ç®—')) {
                return 'æ•°å­¦è®¡ç®—å·¥å…·';
            } else if (lowerName.includes('note') || lowerName.includes('è®°äº‹')) {
                return 'è®°äº‹å’Œå¤‡å¿˜å½•å·¥å…·';
            }
            
            return 'ä¸€ä¸ªå®ç”¨çš„åœ¨çº¿å·¥å…·';
        }
        
        // æ¸²æŸ“å·¥å…·
        function renderTools() {
            const toolsGrid = document.getElementById('toolsGrid');
            const emptyState = document.getElementById('emptyState');
            
            // å¦‚æœæ²¡æœ‰å·¥å…·ï¼Œæ˜¾ç¤ºç©ºçŠ¶æ€
            if (filteredTools.length === 0) {
                toolsGrid.style.display = 'none';
                emptyState.style.display = 'block';
                updatePagination();
                return;
            }
            
            // éšè—ç©ºçŠ¶æ€
            emptyState.style.display = 'none';
            toolsGrid.style.display = 'grid';
            
            // è®¡ç®—åˆ†é¡µ
            const totalPages = Math.ceil(filteredTools.length / itemsPerPage);
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = Math.min(startIndex + itemsPerPage, filteredTools.length);
            const pageTools = filteredTools.slice(startIndex, endIndex);
            
            // ç”Ÿæˆå·¥å…·å¡ç‰‡HTML
            let gridHTML = '';
            
            pageTools.forEach(tool => {
                gridHTML += `
                    <a href="${tool.folder}/" class="tool-card" title="${tool.name}">
                        ${tool.hasSubdirs ? '<div class="subdir-indicator"><i class="fas fa-folder"></i></div>' : ''}
                        <div class="tool-icon">${tool.icon}</div>
                        <div class="tool-name">${tool.name}</div>
                        <div class="tool-folder">/${tool.folder}/</div>
                        <div class="tool-desc">${tool.description}</div>
                    </a>
                `;
            });
            
            toolsGrid.innerHTML = gridHTML;
            
            // æ›´æ–°åˆ†é¡µæ§ä»¶
            updatePagination();
        }
        
        // æ›´æ–°åˆ†é¡µæ§ä»¶
        function updatePagination() {
            const totalPages = Math.ceil(filteredTools.length / itemsPerPage);
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const pageInfoText = document.getElementById('pageInfoText');
            const pageInfo = document.getElementById('pageInfo');
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            prevBtn.disabled = currentPage <= 1;
            nextBtn.disabled = currentPage >= totalPages;
            
            // æ›´æ–°é¡µé¢ä¿¡æ¯
            pageInfoText.textContent = `ç¬¬ ${currentPage} é¡µï¼Œå…± ${totalPages} é¡µ`;
            pageInfo.textContent = `${currentPage}/${totalPages}`;
        }
        
        // ä¸Šä¸€é¡µ
        function prevPage() {
            if (currentPage > 1) {
                currentPage--;
                renderTools();
            }
        }
        
        // ä¸‹ä¸€é¡µ
        function nextPage() {
            const totalPages = Math.ceil(filteredTools.length / itemsPerPage);
            if (currentPage < totalPages) {
                currentPage++;
                renderTools();
            }
        }
        
        // æœç´¢å·¥å…·
        function searchTools() {
            const searchInput = document.getElementById('searchInput');
            const searchTerm = searchInput.value.toLowerCase().trim();
            
            // é‡ç½®åˆ°ç¬¬ä¸€é¡µ
            currentPage = 1;
            
            if (!searchTerm) {
                filteredTools = [...allTools];
            } else {
                filteredTools = allTools.filter(tool => {
                    return tool.name.toLowerCase().includes(searchTerm) ||
                           tool.folder.toLowerCase().includes(searchTerm) ||
                           tool.description.toLowerCase().includes(searchTerm);
                });
            }
            
            // é‡æ–°æ¸²æŸ“å·¥å…·
            renderTools();
        }
        
        // æ¸…é™¤æœç´¢
        function clearSearch() {
            document.getElementById('searchInput').value = '';
            filteredTools = [...allTools];
            currentPage = 1;
            renderTools();
        }
        
        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
        function updateStats() {
            document.getElementById('totalTools').textContent = allTools.length;
            document.getElementById('foldersCount').textContent = allTools.filter(tool => tool.hasSubdirs).length;
        }
        
        // æ›´æ–°ä¸Šæ¬¡æ‰«ææ—¶é—´
        function updateLastScanTime() {
            if (!lastScanTime) return;
            
            const now = new Date();
            const diffMs = now - lastScanTime;
            const diffMins = Math.floor(diffMs / 60000);
            
            let displayTime;
            if (diffMins < 1) {
                displayTime = 'åˆšåˆš';
            } else if (diffMins < 60) {
                displayTime = `${diffMins}åˆ†é’Ÿå‰`;
            } else {
                const diffHours = Math.floor(diffMins / 60);
                displayTime = `${diffHours}å°æ—¶å‰`;
            }
            
            document.getElementById('lastUpdate').textContent = displayTime;
        }
        
        // æ˜¾ç¤ºå¸®åŠ©
        function showHelp() {
            alert('ä½¿ç”¨å¸®åŠ©ï¼š\n\n' +
                  '1. ç³»ç»Ÿä¼šç²¾ç¡®æ‰«ææ‚¨å®é™…åˆ›å»ºçš„å·¥å…·ï¼Œä¸ä¼šæ˜¾ç¤ºæ¨¡æ‹Ÿæ•°æ®\n' +
                  '2. ç‚¹å‡»"æ‰«æå·¥å…·"æŒ‰é’®å¯ä»¥æ‰‹åŠ¨é‡æ–°æ‰«æ\n' +
                  '3. ä½¿ç”¨æœç´¢æ¡†å¯ä»¥å¿«é€ŸæŸ¥æ‰¾å·¥å…·\n' +
                  '4. å·¥å…·å¸¦æœ‰å­ç›®å½•å›¾æ ‡è¡¨ç¤ºè¯¥æ–‡ä»¶å¤¹å†…è¿˜æœ‰æ›´å¤šå·¥å…·\n' +
                  '5. å½“å·¥å…·è¾ƒå¤šæ—¶ï¼Œä¼šè‡ªåŠ¨åˆ†é¡µæ˜¾ç¤º');
        }
        
        // å®šæœŸæ›´æ–°æ‰«ææ—¶é—´æ˜¾ç¤º
        setInterval(() => {
            if (lastScanTime) {
                updateLastScanTime();
            }
        }, 60000); // æ¯åˆ†é’Ÿæ›´æ–°ä¸€æ¬¡
    </script>
</body>
</html>